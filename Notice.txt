/*****************************************************************************************
* Name  :     此截图程序的主CPP文件
* Author:     sudami
* Finish:     2007/10/6
* Edition:    V 1.0
* Condition:  only for XP (-_-|)
* Comment:
*----------------------------------------------------------------------------------------
*                               <前言>
*
* 前段时间在箫心论坛的原创软件区,看到一大牛的软件"箫心截图助手1.5 元旦贺岁版"
* http://bbs.52happy.net/read.php?tid=227062&fpage=3
* 做的很漂亮,于是自己也想仿制一个,于是就有了此劣等品,呵呵
*----------------------------------------------------------------------------------------
*                               <正题>
*  软件功能:
*           1. 随机启动,托盘运行[可选]
*           2. 支持快捷键截图,类似于QQ(2006版本)截图   
*           3. 截图后可发送到画图中编辑,也可迅速保存
*           4. 支持图片格式转换
*           5. 自身保护,防止被恶意程序结束(HOOK)
*           6. 仅允许运行程序的一个实例,防止多个实例加载导致系统资源浪费
*           7. 实现了闪屏效果(MS没多大的必要,嘿嘿)
*           8. 随机标题,防止恶意程序通过简单的FindWindow找到而终止掉
*             (虽然病毒对此不屑一顾,呵呵) 
*           9. 安静方式启动，启动后可直接隐藏至托盘处[可选]
*
*  软件缺陷:
*
*  1. 本打算增加自动弹出气泡的功能,但在修改SDK自带的头文件时遇到很多问题,暂时放弃
*  2. 打算增加截图时的效果音,但在调用下面的语句时候,频繁出现编译错误,暂时无法解决
*             #include   <MMSystem.h> 
*             #pragma   comment(lib,"winmm.lib") 
*  3. 界面上的一些细节问题没有考虑的很周全,所以会有很刺眼的地方,偶目前的知识还没
*     那么多精力和时间去优化  
*----------------------------------------------------------------------------------------
*                               <说明>
*  
*  ① 程序的核心截图功能参考VCKBASE上的文章,原理都差不多,高手见笑了;
*  
*  ② 编写此程序仅是为了锻炼自身独立开发小软件的能力 ---
*     在开发过程中如何解决问题、总结经验、巩固所学知识,掌握更多的细节要点;
*     因此,程序写的很烂,偶把代码丢出来也是为了互相更好的学习,更多的交流;
*
*  ③ 写此程序时,偶已经在学习DDK和ASM了,所以一直是断断续续的写代码.
*     有时候遇到无法解决的问题,只好暂时停下来学习DDK、ASM,等兴致来了,又开始从头读代码,
*     然后接着当时的思路写...
*     于是乎过程是很曲折的,伤心啊~~~ 
*---------------------------------------------------------------------------------------
*                                <完>
*  吼吼,又罗嗦了很多哦.
*  为了变成大菜鸟,加快追赶大牛们的步伐,偶正在努力的学习驱动和汇编,加油~~~~
*
*++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
*++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
*
* Time : 2007/11/3
* 补充 : 
*        最近业余时间忙于学习WINDOWS内核,没精力来继续写这个程序了. 所以程序有很多不完善的地方
*        丢在硬盘里好长时间也没动过, 烂在硬盘里面还不如拿出来给学习这些的同学一个参考.
*        代码写得很烂, 老鸟们手下留情啊.
*****************************************************************************************/




因为在学习RootKit，所以本来一个好好的截图程序，被偶弄的支离破碎, 为了便于实践,就直接在此程序里面加了些功能 -- 利用驱动隐藏进程(RING0),远程注入DLL、IAT HOOK(RING3).

程序运行后会释放3个文件:
1. c:\sudami.ini
2. c:\windows\system32\sudami.dll
2. c:\windows\system32\drivers\sudami.sys

不过这些都是无害的,不是恶意行为,只是偶学习RootKit过程中加进去的,没什么用, 仅仅是偶为了调试方便! 所以不用担心是病毒!


                                                                                   sudami
                                                                                  2007/11/3
                                                                                   beijing  
